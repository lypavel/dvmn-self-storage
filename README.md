# Сайт сервис SelfStorage

Это сайт сети складов для юридеских лиц SelfStorage. Здесь можно арендовать склад и хранить вещи безопасно и выгодно.

![Alt text](/storage/static/img/main_page.png "Главная страница")

# Описание

Сеть SelfStorage объединяет несколько складов, действующих под единой франшизой. Для регистрации вам нужно будет указать
свою почту куда мы будем присылать уведомление о вашей аренде.

Вам надо будет указать свой адрес для доставки. Мы сами найдём ближайший к вам склад, цены рассчитаем и даже привезем
или вы можете сами забрать.

На сайте есть три независимых интерфейса. Первый — это публичная часть, где можно ознакомиться с сервисом.

Второй интерфейс предназначен для авторизованных пользователей. Здесь происходит аренда складов. Пользователь видит
доступные склады и может арендовать склад.

После того как пользователь указал свой адрес, он сможет видеть ближайшие доступные склады. Система так же проверяет
сроки окончания аренд, периодически будет отправлять уведомления о завершении срока аренды.

Третий интерфейс — это админка. Преимущественно им пользуются программисты при разработке сайта. Также сюда заходит
менеджер и владелец, чтобы обновить склады или добавить новые.

## Как запустить dev-версию сайта

Для запуска проекта нужно запустить 2 терминала, 1 для запуска Django, 2 для запуска Celery.

### Как собрать сайт

Скачайте код:

```sh
git clone https://github.com/lypavel/dvmn-self-storage.git
```

Перейдите в каталог проекта:

```sh
cd dvmn-self-storage
```

[Установите Python](https://www.python.org/), если этого ещё не сделали.

[Установите и запустите Redis](https://redis.io/docs/latest/operate/oss_and_stack/install/install-redis/), если этого ещё не сделали.

Проверьте, что `python` установлен и корректно настроен. Запустите его в командной строке:

```sh
python --version
```

**Важно!** Версия Python должна быть не ниже 3.7.

Возможно, вместо команды `python` здесь и в остальных инструкциях этого README придётся использовать `python3`. Зависит
это от операционной системы и от того, установлен ли у вас Python старой второй версии.

В каталоге проекта создайте виртуальное окружение:

```sh
python -m venv venv
```

Активируйте его. На разных операционных системах это делается разными командами:

- Windows: `.\venv\Scripts\activate`
- MacOS/Linux: `source venv/bin/activate`

Установите зависимости в виртуальное окружение:

```sh
pip install -r requirements.txt
```

Создайте файл базы данных и примените миграции

```sh
python manage.py migrate
```

или используйте нашу [тестовую базу данных](https://github.com/lypavel/dvmn-self-storage/tree/main/example) из папки `example`.

Запустите сервер:

```sh
python manage.py runserver
```

Запустите Celery:

```sh
celery -A self_storage worker -l INFO
```

Откройте сайт в браузере по адресу [http://127.0.0.1:8000/](http://127.0.0.1:8000/).

Настроить бэкенд: создать файл `.env` в каталоге `dvmn-self-storage/` со следующими настройками:

- `DEBUG` — дебаг-режим. Поставьте `False`.
- `SECRET_KEY` — секретный ключ проекта. Он отвечает за шифрование на сайте. Например, им зашифрованы все пароли на
  вашем сайте.
- `ALLOWED_HOSTS` — [см. документацию Django](https://docs.djangoproject.com/en/3.1/ref/settings/#allowed-hosts)
- `GEO_API_KEY` — API ключ из Яндекс Геокодер.
- `HOST_URL` — Адрес сайта на котором запущен проект.
- `EMAIL_HOST_USER` — Почта gmail.com откуда будет отправлять уведомления
- `EMAIL_HOST_PASSWORD` — Пароль от почты gmail.com для сторонних
  приложений, [инструкция](https://itsupport.umd.edu/itsupport?id=kb_article_view&sysparm_article=KB0015112)
- `CELERY_WORKER_LOCATION` — Адрес для подключения к брокеру сообщений для воркеров celery

## Цели проекта

Код написан в целях практики работы в команде и умения подстраиваться под задач заказчика.
